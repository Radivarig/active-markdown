# Development

Active Markdown is written using [CoffeeScript](http://coffeescript.org), and
the viewer elements make use of [Backbone](http://backbonejs.org) and
[Stylus](http://learnboost.github.io/stylus/).

1.  Get the code and prepare the environment:

        $ git clone git://github.com/alecperkins/active-markdown.git
        $ cd active-markdown
        $ npm install .

    This will clone the repo into `./active-markdown` and install the
    `deveDependencies` specified in `package.json` into a local `node_modules`.

2.  Run the build task:

    Normally, the build task runs the tests before building. However, some tests
    require the libraries to exist so they can be inlined into the test content.

    Run the tests with the `--firstrun` flag:

        $ cake --firstrun build
    
    This will build the command and the viewer asset packs, the run the full
    build normally, which includes running the tests.

3.  Hack away:

    The source is in `./source`, naturally, and tests are in `./test`. The
    compiled versions generated by the various `cake build` tasks go into
    `./lib` (excluded from source control). Run `$ cake` for a full list of
    the available tasks.

    When working on the viewer scripts,

        $ cake build:script && ./lib/command.coffee -i --debug lib/misc/am_sample.md
    
    is helpful. This updates the script and recompiles the sample to
    `./am_sample.html` in one go.

4.  Run tests:

    To run all of the tests,

        $ cake test

    Or, to run a specific test (make sure `mocha` is in your path),

        $ mocha --compilers coffee:coffee-script -g RangeElement

    See the [mocha](http://visionmedia.github.io/mocha/) docs for more info
    on using `mocha`.

